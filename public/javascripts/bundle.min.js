var compMethods={increment:function(e){this.$emit("increment",e)},drag:function(e){this.$emit("drag",e)},dragover:function(e){this.$emit("dragover",e)},dragend:function(e){this.$emit("dragend",e)}},ButtonComp={props:["comp","id"],template:`<a :href="comp.linkto + '.html'" class="sm-btn" :style="{'transform': 'translate(' + comp.x + 'px,' + comp.y + 'px)'}" :class="[comp.class, comp.size, comp.size == '' ? '' : comp.align ]"  data-comp="drag-div" :data-case="comp.caseid" :id="id" :name="comp.inputname" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend" v-on:click.prevent = "increment" >\n{{ comp.text }}\n</a>\n`,methods:compMethods},InputComp={props:["comp","id"],template:`<div class="sm-cells-wrap" v-on:click = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="sm-cells-title" v-if="comp.isShow">{{comp.title}}</div>\n  <div class="sm-cells" :class="{ merge: comp.isMerge, border: comp.isBorder}">\n    <transition-group name="list-complete" tag="div"  :key="comp.tgId">\n      <div class="sm-cell list-complete-item" :key="cell.id" v-for="(cell, index) in comp.cells" >\n        <label v-if="comp.cells[index].tag != ''" class="sm-cell-label">{{comp.cells[index].tag}}</label>\n        <div>\n          <input type="text" :value="comp.cells[index].placeholder" :placeholder="comp.cells[index].placeholder" :readonly="!comp.cells[index].readonly">\n        </div>\n        <a class="cell-unit" v-if="comp.cells[index].unit != ''">{{comp.cells[index].unit}}</a>\n      </div>\n    </transition-group>\n  </div>\n</div>\n`,methods:compMethods},ButtonbarComp={props:["comp","id"],template:`<div v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n<transition-group name="list-complete" tag="div" class="sm-flex" :key="comp.tgId">\n    <div class="sm-flex-item list-complete-item" :key="cell.id"  v-for="(cell, index) in comp.cells">\n      <a :href="comp.cells[index].linkto | isLink" class="sm-btn" :class="[comp.cells[index].class, comp.barSize]">{{cell.text}}</a>\n    </div>\n  </transition-group>\n</div>\n`,methods:compMethods},ListComp={props:["comp","id"],template:`<div class="sm-cells-wrap" :name="comp.inputname" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="sm-cells-title" v-if="comp.isShow">{{comp.title}}</div>\n  <div class="sm-cells" :class="{ merge: comp.isMerge}">\n    <transition-group name="list-complete" tag="div"  :key="comp.tgId">\n      <a :href="comp.cells[index].linkto | isLink" class="sm-cell list-complete-item" :key="cell.id" v-for="(cell, index) in comp.cells" >\n        <i :class="comp.cells[index].icon" :style="{color: comp.cells[index].colorSelected}"></i>\n        <div>{{comp.cells[index].tag}}<em class="description" v-if=" comp.cells[index].description != ''">{{comp.cells[index].description}}</em></div>\n        <span>{{comp.cells[index].tip}}</span>\n      </a>\n    </transition-group>\n  </div>\n</div>\n`,methods:compMethods},CheckboxComp={props:["comp","id"],template:`<div class="sm-cells-wrap" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="sm-cells-title" v-if="comp.isShow">{{comp.title}}</div>\n  <div class="sm-cells" :class="{ merge: comp.isMerge}">\n    <transition-group name="list-complete" tag="div" :key="comp.tgId">\n      <label class="sm-cell list-complete-item" :class="{reverse: comp.isReverse}" :key="cell.id" v-for="(cell, index) in comp.cells" >\n        <div>{{comp.cells[index].item}}</div><input type="checkbox" :name="comp.inputname" :value="comp.cells[index].item" :checked="!comp.cells[index].checked" class="sm-checkbox">\n      </label>\n    </transition-group>\n  </div>\n</div>\n`,methods:compMethods},RadioComp={props:["comp","id"],template:`<div class="sm-cells-wrap" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="sm-cells-title" v-if="comp.isShow">{{comp.title}}</div>\n  <div class="sm-cells" :class="{ merge: comp.isMerge}">\n    <transition-group name="list-complete" tag="div" :key="comp.tgId">\n      <label class="sm-cell list-complete-item" :key="cell.id" v-for="(cell, index) in comp.cells" >\n        <div>{{comp.cells[index].item}}</div><input type="radio" :name="comp.inputname" :value="comp.cells[index].item"  :checked="!comp.cells[index].checked" class="sm-radio">\n      </label>\n    </transition-group>\n  </div>\n</div>\n`,methods:compMethods},TextareaComp={props:["comp","id"],template:`<div class="sm-cells-wrap" :name="comp.inputname"  v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="sm-cells-title" v-if="comp.isShow">{{comp.title}}</div>\n  <div class="sm-cells" :class="{ merge: comp.isMerge}">\n    <div class="sm-cell" v-for="(cell, index) in comp.cells" >\n      <div>\n        <textarea class="sm-textarea" rows="3" :value="comp.cells[index].control" placeholder="请输入文本内容"></textarea>\n      </div>\n    </div>\n  </div>\n</div>\n`,methods:compMethods},SwitchComp={props:["comp","id"],template:`<div class="sm-cells-wrap" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="sm-cells-title" v-if="comp.isShow">{{comp.title}}</div>\n  <div class="sm-cells" :class="{ merge: comp.isMerge}">\n    <transition-group name="list-complete" tag="div" :key="comp.tgId">\n      <label class="sm-cell sm-cell-switch list-complete-item" :key="cell.id" v-for="(cell, index) in comp.cells" >\n        <div>{{comp.cells[index].item}}</div>\n        <span><input type="checkbox" :name="comp.inputname" class="sm-switch" :checked="!comp.cells[index].checked"></span>\n      </label>\n    </transition-group>\n  </div>\n</div>\n`,methods:compMethods},SelectComp={props:["comp","id"],template:`<div class="sm-cells-wrap" :name="comp.inputname" v-on:click = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="sm-cells-title" v-if="comp.isShow">{{comp.title}}</div>\n  <div class="sm-cells" :class="{ merge: comp.isMerge}" >\n    <transition-group name="list-complete" tag="div" :key="comp.tgId">\n      <div class="sm-cell list-complete-item" :key="cell.id" v-for="(cell, index) in comp.cells">\n        <label v-if="comp.cells[index].tag != ''" class="sm-cell-label">{{comp.cells[index].tag}}</label>\n        <div class="sm-select">\n            <select class="select"  v-model="comp.cells[index].selected" >\n              <option selected>请选择...</option>\n              <option :value="option" v-for="option in filterCells[index].options">{{option}}</option>\n            </select>\n        </div>\n      </div>\n    </transition-group>\n  </div>\n</div>\n`,computed:{filterCells:function(){var e=this.comp.cells,t=[];return $.each(e,function(e,i){t.push({options:i.options.split("-")})}),t}},methods:compMethods},HtmlComp={props:["comp","id"],template:` \n                  <div class="html-box" v-on:click = "increment"  data-comp="drag-div" v-bind:id="id"  draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n                   <span v-html="comp.vcss"></span>\n                   <span class="box-wp" v-html="comp.vhtml"></span>\n                  </div>\n                `,methods:compMethods},SpaceComp={props:["comp","id"],template:`<div class="sm-space" v-bind:style="{height: comp.height  + 'px'}"  v-on:click = "increment"  data-comp="drag-div" v-bind:id="id"  draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend"></div>`,methods:compMethods},PanelComp={props:["comp","id"],template:`<div class="sm-panels" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <transition-group name="list-complete" tag="div" :key="comp.tgId">  \n    <a :href="comp.cells[index].linkto | isLink" class="sm-panel list-complete-item" :class="{'reverse': comp.isReverse, 'radius': comp.isRadius}" :key="cell.id" v-for="(cell, index) in comp.cells">\n      <figure v-if="comp.isFigure">\n        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8BAMAAADI0sRBAAAAIVBMVEX/qgD/3Zn/rgv/46j/6bv/vDT/wkb/2Yv/03r/tB7/y2PJaPMWAAAAwUlEQVQ4y2MYBTQCjIJYgABCGpueYSed7JyAR5rNVdUNjzRzAEMwHmkWBQYWcnQj7CbD5awFeP09RRyfNKcbewEeaeUFDOW4pZmkGBig2jGloVISOKUbQbRiAw5pLiMQzQTTvgJNOlmBAUk7h3ECijSbJ5CEa2cq1HRFkQ4JAJJw7coNDCETkKVLYSwmC2AAWTGA3IIZJVCdoChpxy7NZMXmChZagD1ClUsmgJW5YZdmqoTQMwZhJiJWmlDRMwpoAwDTPB0IZXoaBQAAAABJRU5ErkJggg==">\n      </figure>\n      <article>\n        <h4>{{comp.cells[index].title}}</h4>\n        <p>{{comp.cells[index].content}}</p>\n      </article>\n    </a>\n  </transition-group>\n</div>\n`,methods:compMethods},ArticleComp={props:["comp","id"],template:`<div class="sm-article" :class="{bgc: comp.isBg}" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <h3>{{comp.title}}</h3>\n  <p>{{comp.content}}</p>\n</div>\n`,methods:compMethods},GridComp={props:["comp","id"],template:`<div v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <transition-group name="list-complete" class="sm-grids" :class="{'border-less': comp.isBorder, 'bg': comp.isBg }" :style="{'background-color': comp.isBg ? comp.bgSelected : ''}" tag="div" :key="comp.tgId">  \n    <a :href="comp.cells[index].linkto | isLink" class="sm-grid list-complete-item" :class="comp.columns" :key="cell.id" v-for="(cell, index) in comp.cells">\n      <i :class="comp.cells[index].icon"  :style="{'background-image': comp.cells[index].colorSelected !='' ? '-webkit-linear-gradient(80deg,' + comp.cells[index].colorSelected + ' 60%,#fff)' : '' ,'font-size': +  comp.iconSize + 'px'}"></i>\n      <span>{{comp.cells[index].text}}</span>\n    </a>\n  </transition-group>\n</div>\n`,methods:compMethods},AlertComp={props:["comp","id"],template:`<div class="sm-alert" :class="[comp.type]" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n    <i  v-if="comp.isIcon" :class="'sm-icon-' + comp.type"></i>\n    <span>{{comp.message}}</span>\n</div>\n`,methods:compMethods},ActionsheetComp={props:["comp","id"],template:` \n                  <div>\n                    <div class="sm-mask" :data-case="comp.caseId" :class=" {toggle: comp.isToggle}"></div>\n                    <div class="sm-actionSheet" :data-case="comp.caseId" :class=" {toggle: comp.isToggle}" >\n                      <h3>{{comp.title}}</h3>\n                      <ul>\n                        <li>{{comp.menu}}</li>\n                        <li>示例菜单一</li>\n                        <li>示例菜单一</li>\n                      </ul>\n                      <a href="javascript:;" class="action-cancel">取消</a>\n                    </div>\n                    <div v-html="comp.script"></div>\n                  </div>\n                `},ToastComp={props:["comp","id"],template:` \n                  <div class="sm-toast" :data-case="comp.caseId" :class=" {toggle: comp.isToggle}">\n                    <div>\n                      <i :class="comp.icon"></i>\n                      <p>{{comp.tips}}</p>\n                    </div>\n                    <div v-html="comp.script"></div>\n                  </div>\n                `};Vue.component("sm-header",{props:["title","isback"],template:`\n            <div class="sm-header">\n              <a class="icon-back" href="javascript:history.go(-1)" v-if="isback" ></a>\n              {{title}}\n</div>\n            `}),Vue.component("sm-tabbar",{props:["tabbar"],template:`\n            <div class="sm-tabbar">\n              <a :href="tab.linkto + '.html'" v-for="(tab, index) in tabbar.items.slice(0, tabbar.number)" :class ="{active: tabbar.items[index].active != ''}" >\n                <i :class="tab.icon"></i>\n                <i :class="tab.active"  v-if=" tabbar.items[index].active != ''"></i>\n                <span>{{tab.title}}</span>\n              </a>\n            </div>\n            `});var NavbarComp={props:["comp","id"],template:`<div v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="sm-navbar" :data-case="comp.tgId"> \n    <transition-group name="list-complete" tag="ul" :key="comp.tgId"> \n      <li class="list-complete-item" :key="cell.id" v-for="(cell, index) in comp.cells">{{cell.text}}</li>\n    </transition-group>\n  </div>\n  <div :data-panel="comp.tgId"  v-for="n in comp.cells.length" style="display:none">第{{n}}选项卡内容</div>\n  <div v-html="comp.script"></div>\n</div>\n`,methods:compMethods},SearchbarComp={props:["comp","id"],template:`<div class="sm-searchbar" :data-case="comp.tgId" :class="{'bg': comp.isBg }"  :style="{'background-color': comp.isBg ? comp.bgColor : ''}" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <label></label>\n  <div>\n    <i class="sm-icon-search"></i>\n    <input type="text" placeholder="搜索">\n    <button>取消</button>\n  </div>\n  <div v-html="comp.script"></div>\n</div>\n`,methods:compMethods},SwiperComp={props:["comp","id"],template:`<div v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <div class="swiper-container sm-swiper" :class="[comp.isText ? comp.textAlign:'']" :data-case="comp.tgId">   \n     <div class="swiper-wrapper">\n        <div class="swiper-slide"  v-for="(cell, index) in comp.cells">\n          <img :style="{'background-image':'url(' + cell.img + ')'}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA1IAAAFeAQMAAAC1tbwWAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAADtJREFUeNrtwTEBAAAAwiD7p7bGDmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQcJOoAAGLrjCzAAAAAElFTkSuQmCC">\n          <span v-if="comp.isText">{{cell.text}}</span>\n        </div>\n      </div>\n     <div class="swiper-pagination"></div>\n  </div>\n  <div v-html="comp.script"></div>\n</div>\n`,methods:compMethods},AvatarComp={props:["comp","id"],template:`<div class="sm-avatar" :class="[comp.avatarAlign, comp.fontColor, comp.size]" :style="{'background-image':'url(' + comp.bgImage + ')', 'background-color': comp.bgColor}" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <i style="background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaBAMAAADKhlwxAAAAKlBMVEU4YaT///9AZ6i2xd7o7fXQ2ur3+fymuNZfgLaSqM15lMJMca3AzeLZ4e7wt24ZAAABj0lEQVRYw+3Vu0rDUBjA8Ritt7p8GmMDDQTUTaFRUHCLk3YyvoGDt61VUMQlXZwVRBxTcHCsb6A4ulhHn0a3NvluOZNS+p9/Q07O5bOGDbMsu27Ej1IT3fVMdAgfBvoO3Oviug3gbgVF9Qv85rxfnq9vXj2regT6OnxU9Dhk+g6UL8lWV/5JrjVJR3ntd3g8DagvXpewrvK6BbiU1U1CbwuLxHkcngQih9NTQJUweobUDUaPkfpTOCW4WeF34yo0tpukngtIvQx0+8yFp6tqe6P/8QlWN4TjitsbID3K6ppy4fWraUcMdsiDcsPoE/padknsJ/xThUtNXgjH6PVZMHrZKqwuKRupL1OYzjHC8xZfS9wa/bbdWkIxuu9Sq2jsSNlxdo3KzF/M6DNL6QmNYin7nsfi/az9kcaz6rWAXkJjWKj81tv2joovoNdxoOL+TgMNF+blDci3G+gYc4xDgOL8Aeh2KLyCmHQ3Q1Z7JqMB3IQ6HgZjqi3oivjZ+qscCdpH+kDQLtIg9Y91oVX+AC7VkmZIz3QGAAAAAElFTkSuQmCC);"></i>\n  <span>{{comp.userName}}<em>{{comp.userInfo}}</em></span>\n</div>\n`,methods:compMethods},FlextextComp={props:["comp","id"],template:`<div  v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <transition-group name="list-complete" tag="div"  class="sm-flex flex-text" :class="[comp.isBg ? 'bg' : '', comp.isDivider ? 'divider' : '']" :key="comp.tgId"> \n    <div class="sm-flex-item list-complete-item" :key="cell.id" v-for="(cell, index) in comp.cells" :style="{'background-color': comp.isBg ? comp.bgColor : ''}">\n      <span v-if="cell.one != ''">{{cell.one}}</span>\n      <em v-if="cell.two != ''">{{cell.two}}</em>\n      <label v-if="cell.three != ''">{{cell.three}}</label>\n    </div>\n  </transition-group>\n</div>\n`,methods:compMethods},ImageComp={props:["comp","id"],template:`<div class="sm-image"  :class="{noneBg: comp.url!='' }" v-on:click.prevent = "increment" v-bind:id="id" data-comp="drag-div" draggable="true" v-on:dragstart.stop="drag" v-on:dragover.prevent="dragover" v-on:dragend.prevent="dragend">\n  <img v-bind:src="comp.url" v-bind:style="{'width': comp.size + '%'}">\n</div>\n`,methods:compMethods};Vue.directive("codeHighlight",function(e,t){var i=t.value;e.innerHTML=codeHightLight(i)}),Vue.filter("propname",function(e){return e.substring(e.length-4,0)}),Vue.filter("isLink",function(e){if("#"!=e)return e+".html"}),Vue.directive("spinner",function(e,t){e.onclick=function(){"inc"==t.arg?(t.value=t.value+1,$(e).prev().val(t.value),$(e).prev().trigger("click")):(t.value=t.value-1,$(e).prev().prev().val(t.value),$(e).prev().prev().trigger("click"))}});var vm=new Vue({el:"#app",components:{btnComp:ButtonComp,inputComp:InputComp,buttonbarComp:ButtonbarComp,listComp:ListComp,checkboxComp:CheckboxComp,textareaComp:TextareaComp,radioComp:RadioComp,switchComp:SwitchComp,selectComp:SelectComp,htmlComp:HtmlComp,spaceComp:SpaceComp,panelComp:PanelComp,articleComp:ArticleComp,gridComp:GridComp,navbarComp:NavbarComp,searchbarComp:SearchbarComp,swiperComp:SwiperComp,avatarComp:AvatarComp,flextextComp:FlextextComp,actionsheetComp:ActionsheetComp,alertComp:AlertComp,imageComp:ImageComp,toastComp:ToastComp},data:{compIdx:0,comps:[{}],panelProp:"pageComp",classes:["primary","warning","outline-primary","outline-warning","disabled","link-text","link-text-primary"],themes:Store.fetch("themes-list",'{"primary": "#008AD5", "warning": "#E64340", "success": "#09BB07", "secondary": "#f80", "line": "#dedede", "grayLight": "#999", "bodyBg": "#f7f7f9", "headerBg": "#fff", "tabbarBg": "#f7f7f9", "textColor": "#000", "borderRadius": "5px"}'),pages:Store.fetch("pages","[{}]"),pageIdx:Store.fetch("pageIdx",0),generateHtml:Store.fetch("html-list","[{}]"),tabbar:Store.fetch("tabbar",'{"number": 4,"items": [{"icon": "icon-homepage", "title": "Home", "linkto": "#", "active": ""},{"icon": "icon-label", "title": "Category", "linkto": "#", "active": ""},{"icon": "icon-service", "title": "Service", "linkto": "#", "active": ""},{"icon": "icon-people", "title": "User", "linkto": "#", "active": ""}]}'),iconfont:Store.fetch("iconfont",'["//at.alicdn.com/t/font_378141_8cl3a5vspzo7p66r.css"]'),undo:{},isPreview:!1,caseTypes:["none","actionsheet","toast"],caseIdx:null,jsonUrl:"/cell.json",themeName:Store.fetch("theme-name",'["Default"]')},watch:{comps:{handler:function(e){this.pages.length>1&&window.localStorage.setItem(this.pages[this.pageIdx].id,JSON.stringify(e))},deep:!0},themes:{handler:function(e){Store.save("themes-list",e)},deep:!0},themeName:{handler:function(e){Store.save("theme-name",e)},deep:!0},pages:{handler:function(e){Store.save("pages",e)},deep:!0},pageIdx:{handler:function(e){Store.save("pageIdx",e)},deep:!0},generateHtml:{handler:function(e){Store.save("html-list",e)},deep:!0},tabbar:{handler:function(e){Store.save("tabbar",e)},deep:!0},iconfont:{handler:function(e){Store.save("iconfont",e)},deep:!0}},mounted:function(){var e=this;this.$nextTick(function(){null==Store.fetch("pageIdx",null)&&this.pages.length<3&&(this.pages=[{name:"欢迎页",id:"page1001",title:"欢迎页",isHeader:!0,isBack:!1,isTabbar:!1},{name:"示例",id:"page1002",title:"示例",isHeader:!0,isBack:!0,isTabbar:!1},{}],setTimeout(function(){e.comps=[{name:"htmlComp",vhtml:"<div class='welcome'>\n  <h3>\n<p>欢迎使用</p></h3>\n\n</div>",vcss:"<style>\n.welcome h3{\n  text-align:center;\n  font-size:20px;\n}\n.welcome{\n  padding:80px 0 100px;\n  margin-bottom:15px;\n  background-color:#fff\n}\n</style>"},{name:"btnComp",class:"primary",linkto:"示例",text:"查看示例",inputname:"",caseid:"caseid100",type:"none"},{}]},100),window.localStorage.setItem("page1002",JSON.stringify([{name:"inputComp",title:"个人信息",inputname:"",cells:[{tag:"姓名",control:"",button:""},{tag:"手机号",control:"",button:"验证码"}],isMerge:!1,isShow:!0},{}])),this.generateHtml=[{getHtml:"",getCss:""},{getHtml:"",getCss:""},{}]),this.pages[this.pageIdx].id&&(this.comps=Store.fetch(this.pages[this.pageIdx].id,"[{}]"))})},methods:{removeComp(){this.undo={},this.undo.type="undoComp",this.undo.index=this.compIdx,this.undo.compinfo=this.comps[this.compIdx],this.comps[this.compIdx].caseid&&this.caseDel(this.comps[this.compIdx].caseid),this.comps.splice(this.compIdx,1),$(".select-box").hide()},hideSelBox(){$(".select-box").hide()},selectComp(e,t){var i=$(e.target);i.parents("[data-comp=drag-div]")[0]&&(i=i.parents("[data-comp=drag-div]"));var n=$(".sm-container").scrollTop(),o=i.css("margin-top");o=o.substring(0,o.length-2);var a=i.position().top+n+parseInt(o);$(".select-box").show().css({top:a,height:i.outerHeight()+"px"}),this.compIdx=this.comps.indexOf(t),this.selectedCls=this.comps[this.compIdx].class,this.panelProp=this.comps[this.compIdx].name,this.caseidSet(this.comps[this.compIdx].caseid)},toggleCls(e){$(e.target).parents(".pro-item").toggleClass("category-toggle")},codeScroll(e){var t=$(e.target),i=t.scrollTop(),n=t.scrollLeft();$(".codeMask").scrollTop(i).scrollLeft(n)},fullscreen(){$(".content").toggleClass("fs-cnt"),$(".property").toggleClass("fs-prop"),$(".fullscreen").toggleClass("fs-reset"),this.hideSelBox()},addPage(){var e;if(this.pages.length>1){e=this.pageIdx+1;var t=$(".page-list li").eq(this.pageIdx);setTimeout(function(){t.next().trigger("click")},100)}else e=0;this.pages.splice(e,0,{name:"page"+this.pages.length,id:"page"+Math.round(1e4*Math.random()),title:"导航栏",isHeader:!0,isBack:!0,isTabbar:!1}),window.localStorage.setItem(this.pages[e].id,JSON.stringify([{}])),this.generateHtml.splice(e,0,{getHtml:"",getCss:""})},selectPage(e,t){var i;i="LI"==e.target.nodeName?$(e.target):$(e.target).parents("li"),this.pageIdx=t;var n=i.attr("id");this.compIdx=0,this.comps=JSON.parse(window.localStorage.getItem(n)),this.panelProp="pageComp",$(".select-box").hide(),$.each(this.comps,function(e,t){t.isToggle&&(t.isToggle=!1)})},delectPageConfirm(){this.undo={},this.undo.type="undoPage",this.undo.index=this.pageIdx,this.undo.pageinfo=this.pages[this.pageIdx],this.undo.pagecomps=Store.fetch(this.undo.pageinfo.id),this.undo.htmlinfo=this.generateHtml[this.pageIdx],this.generateHtml.splice(this.pageIdx,1);var e=$(".page-list li").eq(this.pageIdx);this.pages.splice(this.pageIdx,1),0==this.pageIdx&&1!=this.pages.length?setTimeout(function(){e.trigger("click")},100):e.prev().trigger("click");var t=e.attr("id");window.localStorage.removeItem(t),1==this.pages.length&&(this.comps=[{}]),$("#modal-page").removeClass("in"),$(".modal-mask").removeClass("in")},delectPage(){$("#modal-page").addClass("in"),$(".modal-mask").addClass("in")},getPageinfo(){var e=this.generateHtml.length-1,t="";$.each(this.generateHtml,function(i,n){i!=e&&($("#phtml"+i)[0]?$("#phtml"+i).val(n.getHtml):$("#form-cvs").append($('<input type="hidden" name="pagehtml">').attr({value:n.getHtml,id:"phtml"+i})),t+=n.getCss)}),$.each(this.pages,function(t,i){t!=e&&($("#pname"+t)[0]?$("#pname"+t).val(i.name):$("#form-cvs").append($('<input type="hidden" name="pagename">').attr({value:i.name,id:"pname"+t})))}),$("#pcss")[0]?$("#pcss").val(t):$("#form-cvs").append($('<input type="hidden" name="pagecss">').attr({value:t,id:"pcss"}))},submit(){this.getPageinfo(),Store.save("html-list",this.generateHtml),$("#form-cvs").submit()},preview(){if($(".navbar a").toggleClass("active"),this.isPreview=!this.isPreview,1==this.isPreview){this.getPageinfo();var e=[],t=[],i=[];$.each($("[name=pagehtml]"),function(t,i){e.push(i.value)}),$.each($("[name=pagename]"),function(e,i){t.push(i.value)}),$.each($("[name=pagecss]"),function(e,t){i.push(t.value)}),$.ajax({type:"post",url:"/preview",data:{pagehtmlNew:JSON.stringify(e),pagenameNew:JSON.stringify(t),pagecssNew:JSON.stringify(i)},dataType:"json",success:function(e){$(".preview-loading").hide(),$("#preview-frame").attr("src","/preview")}})}else $("#form-cvs input[type=hidden]").remove()},chooseIcon(e){var t=$(e.target);$("#modal-iconfont").addClass("in"),$(".modal-mask").addClass("in"),$.ajax({type:"get",url:"https:"+this.iconfont,success:function(e){var i="";e.match(/i(\S*)before/g).forEach(function(e){var t=e.substring(0,e.indexOf(":"));i+="<i class="+t+"></i>"}),$(".iconfont-show").html(i).find("i").on("click",function(){var e=$(this).attr("class");t.prev().val(e),t.prev().trigger("click"),$("#modal-iconfont").removeClass("in"),$(".modal-mask").removeClass("in")})}})},undoThis(){"{}"!=JSON.stringify(this.undo)&&("undoPage"==this.undo.type?(this.pages.splice(this.undo.index,0,this.undo.pageinfo),this.generateHtml.splice(this.undo.index,0,this.undo.htmlinfo),window.localStorage.setItem(this.undo.pageinfo.id,JSON.stringify(this.undo.pagecomps)),0==this.undo.index&&setTimeout(function(){$(".page-list li").eq(0).trigger("click")},100)):"undoComp"==this.undo.type&&this.comps.splice(this.undo.index,0,this.undo.compinfo),this.undo={})},drag:function(e){dom=e.currentTarget,domId=$(dom).attr("id"),$clonedom=$(dom).clone(!0),cloneId=$clonedom.attr("id"),isDragin=!1,$(".select-box").hide()},dragItem:function(e){switch(e){case"anyComp":dom=$('<div data-comp="drag-div" id="0" draggable="true"></div>')}domId=$(dom).attr("id"),$clonedom=$(dom).clone(!0),cloneId=$clonedom.attr("id"),isDragin=!1,$(".select-box").hide()},dragoverItem:function(){0==isDragin&&(isDragin=!isDragin)},dragleaveItem:function(){isDragin=!1},dragendItem:function(e){var t,i="tg"+Math.round(1e4*Math.random()),n={name:"btnComp",class:"primary",linkto:"#",text:"按钮"+this.comps.length,inputname:"",caseid:"caseid"+Math.round(100*Math.random()),type:"none",align:"",x:0,y:0,size:""},o={name:"inputComp",title:"委托信息",inputname:"",tgId:i,cells:[{tag:"证券代码",placeholder:"例: 01525 ",unit:"",readonly:!0,id:i+"-1"},{tag:"买入价格",placeholder:"请输入买入价格",unit:"元",readonly:!0,id:i+"-2"}],isMerge:!1,isBorder:!1,isShow:!0},a={name:"buttonbarComp",barSize:"",tgId:i,cells:[{text:"确定",class:"primary",linkto:"#",id:i+"-1"},{text:"取消",class:"primary",linkto:"#",id:i+"-2"}]},s={name:"listComp",title:"会员信息",inputname:"",colors:["#1D8FE1","#F29402","#FF7070","#5D52E8","#0EA39C","#EE7116","#65BB12","#F15A4A","#999","#555"],tgId:i,cells:[{tag:"会员特权",description:"消费获积分累加权限",tip:"",icon:"icon-select",linkto:"#",colorSelected:"#1D8FE1",id:i+"-1"},{tag:"会员认证",description:"",tip:"已认证",icon:"icon-integral",linkto:"#",colorSelected:"#F29402",id:i+"-2"}],isMerge:!1,isShow:!0},c={name:"checkboxComp",title:"您去过的城市？",inputname:"city",tgId:i,cells:[{item:"福州",checked:!0,id:i+"-1"},{item:"厦门",checked:!0,id:i+"-2"},{item:"上海",checked:!0,id:i+"-3"}],isMerge:!1,isShow:!0,rows:[{reverse:!1,txt:"文字在左"},{reverse:!0,txt:"文字在右"}],isReverse:!1},l={name:"radioComp",title:"您的性别？",inputname:"sex",tgId:i,cells:[{item:"男",checked:!0,id:i+"-1"},{item:"女",checked:!0,id:i+"-2"}],isMerge:!1,isShow:!0},d={name:"textareaComp",title:"标题",inputname:"",cells:[{control:""}],isMerge:!1,isShow:!0},r={name:"switchComp",title:"同步",inputname:"synch",tgId:i,cells:[{item:"开启自动同步",checked:!0,id:i+"-1"}],isMerge:!1,isShow:!0},p={name:"selectComp",title:"标题",inputname:"lang",tgId:i,cells:[{tag:"语言",selected:"请选择...",options:"中文-英文",id:i+"-1"}],isMerge:!1,isShow:!0},m={name:"htmlComp",vhtml:`<div class='box'>\n请在右边编辑框中插入html,实时预览效果 →\n</div>`,vcss:`<style>\n.box{\n  font-size: 12px;\n  padding: 10px;\n  margin: 10px 0;\n  background-color: #fff;\n  border: 1px dashed #0cf;\n}\n</style>`},g={name:"spaceComp",height:15},v={name:"panelComp",isFigure:!0,isRadius:!1,tgId:i,cells:[{title:"标题",content:"内容内容内容",linkto:"#",id:i+"-1"}],rows:[{reverse:!1,txt:"图片居左"},{reverse:!0,txt:"图片居右"}],isReverse:!1},h={name:"articleComp",title:"文章的标题",content:"这里显示多行内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容",isBg:!0},u={name:"gridComp",columns:"four",isBg:!1,bgSelected:"",isBorder:!1,colors:["#1D8FE1","#F29402","#FF7070","#5D52E8","#0EA39C","#EE7116","#65BB12","#F15A4A","#999","#555"],iconSize:32,tgId:i,cells:[{text:"账户",icon:"icon-addressbook",linkto:"#",colorSelected:"#1D8FE1",id:i+"-1"},{text:"转账",icon:"icon-coupons",linkto:"#",colorSelected:"#F29402",id:i+"-2"},{text:"信用卡",icon:"icon-headlines",linkto:"#",colorSelected:"#FF7070",id:i+"-3"},{text:"缴费",icon:"icon-createtask",linkto:"#",colorSelected:"#5D52E8",id:i+"-4"}]},b={name:"alertComp",type:"info-circle",message:"业务说明信息，提示信息",isIcon:!0},f={name:"navbarComp",tgId:i,script:`\n                          <script>\n$(".sm-navbar[data-case=${i}] li").eq(0).addClass("active")\n$("[data-panel=${i}]").eq(0).show()\n$(".sm-navbar[data-case=${i}] li").each(function(index){\n  $(this).on("click", function(){\n    $(this).addClass("active").siblings("li").removeClass("active")\n    $("[data-panel=${i}]").hide()\n    $("[data-panel=${i}]").eq(index).show()\n  })\n})\n<\/script>\n`,cells:[{text:"选项一",id:i+"-1"},{text:"选项二",id:i+"-2"},{text:"选项三",id:i+"-3"}]},x={name:"searchbarComp",tgId:i,isBg:!1,bgColor:"",script:`\n                          <script>\n$(".sm-searchbar[data-case=${i}] > label").on("click",function(){\n  $(this).hide()\n  $(this).parent().find("input").focus()\n})\n$(".sm-searchbar[data-case=${i}] input").blur(function(){\n  $(".sm-searchbar[data-case=${i}] > label").show()\n  $(this).val("")\n})\n<\/script>\n\n`},C={name:"swiperComp",tgId:i,isText:!1,textAlign:"bullet-right",script:`\n  <script src="https://cdn.bootcss.com/Swiper/3.4.2/js/swiper.min.js"><\/script>\n  <link rel="stylesheet" href="https://cdn.bootcss.com/Swiper/3.4.2/css/swiper.min.css">\n <script>\nvar swiper = new Swiper('.sm-swiper[data-case=${i}]', {\n\t\t\t\t\tpagination: '.swiper-pagination',\n\t\t\t\t\tpaginationClickable: true,\n          autoplay:2000\n\t\t\t})\n<\/script>\n`,cells:[{img:"https://images.uiiiuiii.com/wp-content/uploads/2018/01/uiii-bbanner-1172.jpg",text:"幻灯片标题",id:i+"-1"},{img:"https://images.uiiiuiii.com/wp-content/uploads/2018/02/uiii-bbaner-203.jpg",text:"幻灯片标题",id:i+"-2"},{img:"https://images.uiiiuiii.com/wp-content/uploads/2018/01/uiii-bbanner-125.jpg",text:"幻灯片标题",id:i+"-3"}]},A={name:"avatarComp",avatarAlign:"",fontColor:"",size:"",bgColor:"",bgImage:"",userName:"昵称",userInfo:"NiChen"},k={name:"flextextComp",tgId:i,isBg:!1,bgColor:"",isDivider:!1,cells:[{one:"货币基金",two:"5.53%",three:"7日年化",id:i+"-1"},{one:"月度理财",two:"4.72%",three:"上期年化",id:i+"-2"},{one:"五星基金",two:"52.8%",three:"近1年收益",id:i+"-3"}]},I={name:"imageComp",url:"",size:50};switch(e){case"btnComp":t=n;break;case"inputComp":t=o;break;case"buttonbarComp":t=a;break;case"listComp":t=s;break;case"checkboxComp":t=c;break;case"radioComp":t=l;break;case"textareaComp":t=d;break;case"switchComp":t=r;break;case"selectComp":t=p;break;case"htmlComp":t=m;break;case"spaceComp":t=g;break;case"panelComp":t=v;break;case"articleComp":t=h;break;case"gridComp":t=u;break;case"navbarComp":t=f;break;case"searchbarComp":t=x;break;case"swiperComp":t=C;break;case"avatarComp":t=A;break;case"flextextComp":t=k;break;case"alertComp":t=b;break;case"imageComp":t=I}1==isDragin?"0.5"!=$clonedom.css("opacity")?this.comps.splice(this.comps.length-1,0,t):($clonedom.remove(),this.comps.splice(cloneIndex,0,t)):$clonedom.remove()},handleDragover:function(e){var t=$(e.target).closest('[data-comp="drag-div"]');overId=t.attr("id"),$(dom).hide(),cloneId<overId?(t.after($clonedom[0]),cloneId++):(t.before($clonedom[0]),cloneId--),$clonedom.css({border:"1px dashed #5bc0de",opacity:"0.5"}),cloneIndex=$clonedom.index('[data-comp="drag-div"]:visible')},handleDragend:function(e){$clonedom.remove(),$(dom).show(),this.comps.splice(cloneIndex,0,this.comps.splice(domId,1)[0])},caseSelect:function(e){var t=e.target.value,i=this.comps[this.compIdx].caseid;let n=this;var o;if(void 0!=n.comps[n.compIdx].type)if("none"!=t){var a,s=`\n                              <script>\n$(":not(div)[data-case=${i}]").on("click",function(e){\n  $(".sm-mask[data-case=${i}]").fadeIn(200)\n  $(".sm-actionSheet[data-case=${i}]").addClass('toggle')\t\n})\n$(".sm-mask, .action-cancel").on("click",function(e){\n  e.stopPropagation()\n  $(".sm-mask").fadeOut(300)\n  $(".sm-actionSheet").removeClass('toggle')\t\t\t\n})\n<\/script>\n`,c=`\n                          <script>\n$(":not(div)[data-case=${i}]").on("click",function(){\t\t\n   var  $toast = $(".sm-toast[data-case=${i}]")\n   if ($toast.css('display') != 'none') return;\t\t\n   $toast.fadeIn(100)\n   setTimeout(function(){\n     $toast.fadeOut(100)\n   },2000)\n})\n<\/script>\n`;switch(t){case"actionsheet":a={name:t+"Comp",caseId:i,title:"标题",menu:"示例菜单一",script:s,isToggle:!0};break;case"toast":a={name:t+"Comp",caseId:i,tips:"加载中",icon:"sm-icon-loading",script:c,isToggle:!0}}null==n.caseIdx?(n.comps.splice(n.comps.length-1,0,a),n.caseIdx=n.comps.length-2):($.each(n.comps,function(e,t){t.caseId==i&&n.compIdx!=e&&(n.caseIdx=e,o=n.comps[e].caseId,n.comps.splice(e,1),n.comps.splice(e,0,a))}),o!=i&&(n.comps.splice(n.comps.length-1,0,a),n.caseIdx=n.comps.length-2))}else this.caseDel(i)},caseDel:function(e){let t=this;$.each(t.comps,function(i,n){if(n.caseId==e&&t.compIdx!=i)return t.comps.splice(i,1),!1})},caseidSet:function(e){let t=this;$.each(t.comps,function(i,n){if(n.caseId==e&&t.compIdx!=i)return t.caseIdx=i,!1})},addCell(e){var t=this.comps[this.compIdx].cells.length;this.comps[this.compIdx].cells.splice(t,0,e)},delCell(e){this.comps[this.compIdx].cells.splice(e,1)},sortCell(e,t){var i=this.comps[this.compIdx].cells,n=this.comps[this.compIdx].cells.length;if("up"==e){if(0==t)return;i[t]=i.splice(t-1,1,i[t])[0]}else{if(t==n-1)return;i[t]=i.splice(t+1,1,i[t])[0]}},getJson:function(){let e=this;$.ajax({type:"get",url:e.jsonUrl,dataType:"json",success:function(e){}})}},updated:function(){var e=$("#canvas").clone(),t="";e.find("style")&&(e.find("style").each(function(){t+=$(this).html()}),this.generateHtml[this.pageIdx].getCss=t),e.find(".html-box")&&e.find(".html-box").each(function(){var e=$(this).find(".box-wp");$(this).replaceWith(e.children())}),e.find(".select-box").remove(),this.generateHtml[this.pageIdx].getHtml=e.html()},created:function(){let e=this;document.onkeydown=function(){if(1==event.ctrlKey&&90==event.keyCode){if($(".c-ipt").is(":focus")||$("textarea").is(":focus"))return;event.preventDefault(),e.undoThis()}}}});